<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AutoCustomizer | Car Parts Marketplace</title>
    <link rel="stylesheet" href="/styles/all.css" />
  </head>
  <body>
    <nav>
      <div class="logo">AutoCustomizer</div>
      <ul class="nav-links" id="globalNav">
        <li><a href="/">Home</a></li>
        <li id="loginLink"><a href="/login">Login</a></li>
        <li id="signupLink"><a href="/signup">Signup</a></li>
        <li><a href="/contactus">Contact Us</a></li>
        <li><a href="/faq">FAQ</a></li>
      </ul>
    </nav>

    <header>
      <h1>Welcome to AutoCustomizer</h1>
      <p>
        The ultimate marketplace connecting car enthusiasts, quality parts
        sellers, and expert service providers.
      </p>
    </header>

    <section class="hero">
      <img
        src="/public/images2/car-customization.png"
        alt="Car Customization"
      />
      <div class="hero-content">
        <h2>Your Car, Your Style!</h2>
        <p>
          Whether you're looking to customize your car, sell premium parts, or
          offer your expert services - AutoCustomizer is your platform.
        </p>
        <div class="cta-buttons" id="ctaContainer">
          <!-- Buttons inserted dynamically -->
        </div>
      </div>
    </section>

    <section class="user-types">
      <h2>AutoCustomizer For Everyone</h2>
      <div class="user-type-container">
        <div class="user-type">
          <h3>Car Owners</h3>
          <p>
            Find premium parts and expert services to customize your vehicle
            exactly how you want it.
          </p>
          <a href="/signup" class="btn small">Get Started</a>
        </div>
        <div class="user-type">
          <h3>Parts Sellers</h3>
          <p>
            Reach thousands of car enthusiasts looking for quality parts. Manage
            inventory, sales, and grow your business.
          </p>
          <a href="/signup" class="btn small">Start Selling</a>
        </div>
        <div class="user-type">
          <h3>Service Providers</h3>
          <p>
            Showcase your expertise, get booked online, and expand your customer
            base through our platform.
          </p>
          <a href="/signup" class="btn small">Offer Services</a>
        </div>
      </div>
    </section>

    <section class="features">
      <div class="feature">
        <img src="/public/images2/products.png" alt="Car Parts" />
        <h3>Wide Range of Car Parts</h3>
        <p>
          Find or sell the best quality car parts & accessories for all
          customization needs.
        </p>
      </div>
      <div class="feature">
        <img src="/public/images2/service.png" alt="Car Service" />
        <h3>Top Service Providers</h3>
        <p>
          Choose from or join our network of expert service providers for car
          wrapping, tuning, and more.
        </p>
      </div>
      <div class="feature">
        <img src="/public/images2/easy-booking.png" alt="Easy Booking" />
        <h3>Easy Platform for All</h3>
        <p>
          Shop with ease, book services instantly, or manage your
          seller/provider business through our intuitive dashboard.
        </p>
      </div>
    </section>

    <section class="benefits">
      <h2>Why Join AutoCustomizer as a Business Partner?</h2>
      <div class="benefits-container">
        <div class="benefit">
          <h3>Targeted Audience</h3>
          <p>
            Connect directly with car enthusiasts actively looking for your
            products and services.
          </p>
        </div>
        <div class="benefit">
          <h3>Business Tools</h3>
          <p>
            Access inventory management, scheduling, analytics, and payment
            processing tools.
          </p>
        </div>
        <div class="benefit">
          <h3>Growth Opportunity</h3>
          <p>
            Expand your reach and grow your business through our marketplace
            platform.
          </p>
        </div>
        <div class="benefit">
          <h3>Seamless Experience</h3>
          <p>
            Our platform handles the technical details so you can focus on your
            core business.
          </p>
        </div>
      </div>
      <a href="/faq" class="btn large"
        >Learn More About Our Business Solutions</a
      >
    </section>

    <footer>
      <p>&copy; 2025 AutoCustomizer. All rights reserved.</p>
    </footer>

    <script>
      async function loadSession() {
        try {
          const res = await fetch("/api/session", {
            headers: { Accept: "application/json" },
          });
          if (!res.ok) throw new Error("session fetch failed");
          const data = await res.json();
          const cta = document.getElementById("ctaContainer");
          cta.innerHTML = "";
          if (data.authenticated) {
            // Always allow browsing products & booking services
            cta.appendChild(btn("/customer/index.html", "Browse Products"));
            cta.appendChild(btn("/customer/booking.html", "Book a Service"));
            // Add logout + role-specific quick links maybe later
            // Optionally hide login/signup in nav
            document.getElementById("loginLink")?.remove();
            document.getElementById("signupLink")?.remove();
          } else {
            cta.appendChild(btn("/login", "Browse Products"));
            cta.appendChild(btn("/login", "Book a Service"));
          }
          cta.appendChild(btn("/signup", "Sell Products", "seller-btn"));
          cta.appendChild(btn("/signup", "Offer Services", "provider-btn"));
        } catch (err) {
          console.error("Session load error", err);
          // Fallback: treat as guest
          const cta = document.getElementById("ctaContainer");
          cta.innerHTML = "";
          cta.appendChild(btn("/login", "Browse Products"));
          cta.appendChild(btn("/login", "Book a Service"));
          cta.appendChild(btn("/signup", "Sell Products", "seller-btn"));
          cta.appendChild(btn("/signup", "Offer Services", "provider-btn"));
        }
      }
      function btn(href, text, extra) {
        const a = document.createElement("a");
        a.href = href;
        a.textContent = text;
        a.className = "btn" + (extra ? " " + extra : "");
        return a;
      }
      loadSession();
    </script>
  </body>
</html>
